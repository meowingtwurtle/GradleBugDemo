apply plugin: 'java'

sourceCompatibility = JavaVersion.VERSION_1_9

repositories {}

dependencies {}

task fixBuild(type: FixBuild)

class FixBuild extends DefaultTask {
    @TaskAction
    def fixBuild() {
        File moduleInfoFile = new File("src/main/java/module-info.java")
        if (moduleInfoFile.exists()) {
            moduleInfoFile.renameTo("src/main/java/module-info.java.bak")
        }
    }
}

task breakBuild(type: BreakBuild)

class BreakBuild extends DefaultTask {
    @TaskAction
    def breakBuild() {
        File moduleInfoFile = new File("src/main/java/module-info.java.bak")
        if (moduleInfoFile.exists()) {
            moduleInfoFile.renameTo("src/main/java/module-info.java")
        }
    }
}
